{% extends 'base.html' %}
{% block content %}
<!--begin::Entry-->
						<div class="d-flex flex-column-fluid">
							<!--begin::Container-->
							<div class="container">
								<!--begin::Notice-->
								<div class="alert alert-custom alert-white alert-shadow gutter-b" role="alert">
									<div class="alert-icon">
										<span class="svg-icon svg-icon-primary svg-icon-xl">
											<!--begin::Svg Icon | path:assets/media/svg/icons/Tools/Compass.svg-->
											<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
												<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
													<rect x="0" y="0" width="24" height="24" />
													<path d="M7.07744993,12.3040451 C7.72444571,13.0716094 8.54044565,13.6920474 9.46808594,14.1079953 L5,23 L4.5,18 L7.07744993,12.3040451 Z M14.5865511,14.2597864 C15.5319561,13.9019016 16.375416,13.3366121 17.0614026,12.6194459 L19.5,18 L19,23 L14.5865511,14.2597864 Z M12,3.55271368e-14 C12.8284271,3.53749572e-14 13.5,0.671572875 13.5,1.5 L13.5,4 L10.5,4 L10.5,1.5 C10.5,0.671572875 11.1715729,3.56793164e-14 12,3.55271368e-14 Z" fill="#000000" opacity="0.3" />
													<path d="M12,10 C13.1045695,10 14,9.1045695 14,8 C14,6.8954305 13.1045695,6 12,6 C10.8954305,6 10,6.8954305 10,8 C10,9.1045695 10.8954305,10 12,10 Z M12,13 C9.23857625,13 7,10.7614237 7,8 C7,5.23857625 9.23857625,3 12,3 C14.7614237,3 17,5.23857625 17,8 C17,10.7614237 14.7614237,13 12,13 Z" fill="#000000" fill-rule="nonzero" />
												</g>
											</svg>
											<!--end::Svg Icon-->
										</span>
									</div>
									<div class="alert-text">The grouping indicator is added by the drawCallback function, which will parse through the rows which are displayed, and enter a grouping TR element where a new group is found. See official documentation
									<a class="font-weight-bold" href="https://datatables.net/examples/advanced_init/row_grouping.html" target="_blank">here</a>.</div>
								</div>
								<!--end::Notice-->
								<!--begin::Card-->
								<div class="card card-custom">
									<div class="card-header">
										<div class="card-title">
											<span class="svg-icon svg-icon-primary svg-icon-2x"><!--begin::Svg Icon | path:C:\wamp64\www\keenthemes\themes\metronic\theme\html\demo1\dist/../src/media/svg/icons\Home\Home.svg--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
												<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
													<rect x="0" y="0" width="24" height="24"/>
													<path d="M3.95709826,8.41510662 L11.47855,3.81866389 C11.7986624,3.62303967 12.2013376,3.62303967 12.52145,3.81866389 L20.0429,8.41510557 C20.6374094,8.77841684 21,9.42493654 21,10.1216692 L21,19.0000642 C21,20.1046337 20.1045695,21.0000642 19,21.0000642 L4.99998155,21.0000673 C3.89541205,21.0000673 2.99998155,20.1046368 2.99998155,19.0000673 L2.99999828,10.1216672 C2.99999935,9.42493561 3.36258984,8.77841732 3.95709826,8.41510662 Z M10,13 C9.44771525,13 9,13.4477153 9,14 L9,17 C9,17.5522847 9.44771525,18 10,18 L14,18 C14.5522847,18 15,17.5522847 15,17 L15,14 C15,13.4477153 14.5522847,13 14,13 L10,13 Z" fill="#000000"/>
												</g>
											</svg><!--end::Svg Icon--></span>
											<h3 class="card-label">Villa Houses</h3>
										</div>
										<div class="card-toolbar">
											<!--begin::Dropdown-->
											<div class="dropdown dropdown-inline mr-2">
												<button type="button" class="btn btn-light-primary font-weight-bolder dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
												<span class="svg-icon svg-icon-md">
													<!--begin::Svg Icon | path:assets/media/svg/icons/Design/PenAndRuller.svg-->
													<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
														<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
															<rect x="0" y="0" width="24" height="24" />
															<path d="M3,16 L5,16 C5.55228475,16 6,15.5522847 6,15 C6,14.4477153 5.55228475,14 5,14 L3,14 L3,12 L5,12 C5.55228475,12 6,11.5522847 6,11 C6,10.4477153 5.55228475,10 5,10 L3,10 L3,8 L5,8 C5.55228475,8 6,7.55228475 6,7 C6,6.44771525 5.55228475,6 5,6 L3,6 L3,4 C3,3.44771525 3.44771525,3 4,3 L10,3 C10.5522847,3 11,3.44771525 11,4 L11,19 C11,19.5522847 10.5522847,20 10,20 L4,20 C3.44771525,20 3,19.5522847 3,19 L3,16 Z" fill="#000000" opacity="0.3" />
															<path d="M16,3 L19,3 C20.1045695,3 21,3.8954305 21,5 L21,15.2485298 C21,15.7329761 20.8241635,16.200956 20.5051534,16.565539 L17.8762883,19.5699562 C17.6944473,19.7777745 17.378566,19.7988332 17.1707477,19.6169922 C17.1540423,19.602375 17.1383289,19.5866616 17.1237117,19.5699562 L14.4948466,16.565539 C14.1758365,16.200956 14,15.7329761 14,15.2485298 L14,5 C14,3.8954305 14.8954305,3 16,3 Z" fill="#000000" />
														</g>
													</svg>
													<!--end::Svg Icon-->
												</span>Export</button>
												<!--begin::Dropdown Menu-->
												<div class="dropdown-menu dropdown-menu-sm dropdown-menu-right">
													<!--begin::Navigation-->
													<ul class="navi flex-column navi-hover py-2">
														<li class="navi-header font-weight-bolder text-uppercase font-size-sm text-primary pb-2">Choose an option:</li>
														<li class="navi-item">
															<a href="#" class="navi-link">
																<span class="navi-icon">
																	<i class="la la-print"></i>
																</span>
																<span class="navi-text">Print</span>
															</a>
														</li>
														<li class="navi-item">
															<a href="#" class="navi-link">
																<span class="navi-icon">
																	<i class="la la-copy"></i>
																</span>
																<span class="navi-text">Copy</span>
															</a>
														</li>
														<li class="navi-item">
															<a href="#" class="navi-link">
																<span class="navi-icon">
																	<i class="la la-file-excel-o"></i>
																</span>
																<span class="navi-text">Excel</span>
															</a>
														</li>
														<li class="navi-item">
															<a href="#" class="navi-link">
																<span class="navi-icon">
																	<i class="la la-file-text-o"></i>
																</span>
																<span class="navi-text">CSV</span>
															</a>
														</li>
														<li class="navi-item">
															<a href="#" class="navi-link">
																<span class="navi-icon">
																	<i class="la la-file-pdf-o"></i>
																</span>
																<span class="navi-text">PDF</span>
															</a>
														</li>
													</ul>
													<!--end::Navigation-->
												</div>
												<!--end::Dropdown Menu-->
											</div>
											<!--end::Dropdown-->
											<!--begin::Button-->
											<div class="btn btn-light-primary font-weight-bold mr-2">


												<a href="#" style="margin-top: 50px;" data-toggle="modal" data-target="#exampleModalScrollable">New Home</a>

												<div class="modal fade" id="exampleModalScrollable" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
													<div class="modal-dialog modal-dialog-scrollable" role="document">
														<div class="modal-content">
															<div class="modal-header">
																<h5 class="modal-title" id="exampleModalLabel">Create house</h5>
																<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																	<i aria-hidden="true" class="ki ki-close"></i>
																</button>
															</div>
															<div class="modal-body" style="height: 600px;">

																<form action="{% url 'create_house_url' %}" method="post" enctype="multipart/form-data">
																					{% csrf_token %}

																					<!-- Add input fields for each attribute of the Home model -->
																					<label>Name:</label>
																					<input type="text" name="name" required><br><br>

																					<label>Home Image:</label>
																					<input type="file" name="home_img" accept="image/*" required><br><br>

																					<!-- Add input fields for the remaining attributes of the Home model -->
																					<label>Price:</label>
																					<input type="number" name="price" required><br><br>

																					<label>User Image:</label>
																					<input type="file" name="user_img" accept="image/*" required><br><br>

																					<label>User Name:</label>
																					<input type="text" name="user_name" required><br><br>

																					<label>User Location:</label>
																					<input type="text" name="user_location" required><br><br>

																					<label>Status:</label>
																					<select name="status" required>
																						<option value="popular">Popular</option>
																						<option value="new house">New House</option>
																						<option value="best deals">Best Deals</option>
																					</select><br><br>

																					<label>Category:</label>
																					<select name="category" required>
																						<option value="House">House</option>
																						<option value="Villa">Villa</option>
																						<option value="Apartment">Apartment</option>
																					</select><br><br>

																					<label>Bathrooms:</label>
																					<input type="number" name="bathrooms" required><br><br>

																					<label>Bedrooms:</label>
																					<input type="number" name="bedrooms" required><br><br>

																					<label>Carports:</label>
																					<input type="number" name="carports" required><br><br>

																					<label>Floors:</label>
																					<input type="number" name="floors" required><br><br>

																					<label>Descriptions:</label>
																					<textarea name="descriptions" rows="4" cols="50" required></textarea><br><br>

																					<label>Created At:</label>
																					<input type="date" name="created_at" required><br><br>


																					<div class="modal-footer">
																						<button type="button" class="btn btn-light-primary font-weight-bold" data-dismiss="modal">Close</button>
																						<button type="submit" class="btn btn-primary font-weight-bold">Save changes</button>
																					</div>
																				</form>

															</div>
														</div>
													</div>
												</div>
											</div>

										</div>
									</div>

									<div class="card-body">
										<!--begin: Datatable-->
										<table class="table table-bordered table-checkable" id="kt_datatable" style="margin-top: 13px !important">
											<thead>
												<tr>
													<th>Home ID</th>
													<th>User Avatar</th>
													<th>User Name</th>
													<th>User Address</th>
													<th>Price</th>
													<th>Status</th>
													<th>Bathrooms</th>
													<th>Bedrooms</th>
													<th>Car ports</th>
													<th>Floors</th>
													<th>Home Image</th>
													<th>Created at</th>
													<th>Update Home</th>
													<th>Delete Home</th>
												</tr>
											</thead>
											<tbody>
											{% for i in a %}
												<tr>
													<td>{{ i.id }}</td>
													<td><img height="50" width="100" src="{{ i.user_img.url }}"></td>
													<td>{{ i.user_name }}</td>
													<td>{{ i.user_location }}</td>
													<td>{{ i.price }}</td>
													<td>{{ i.status }}</td>
													<td>{{ i.bathrooms }}</td>
													<td>{{ i.bedrooms }}</td>
													<td>{{ i.carports }}</td>
													<td>{{ i.floors }}</td>
													<td><img height="50" width="100" src="{{ i.home_img.url }}"></td>
													<td>{{ i.created_at }}</td>
													<td>
														<!-- Button trigger modal-->
													<button type="button" class="btn btn-outline-primary" data-toggle="modal" data-target="#update{{ i.id }}">
														Update
													</button>

													<!-- Modal-->
													<div class="modal fade" id="update{{ i.id }}" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
														<div class="modal-dialog modal-dialog-scrollable" role="document">
															<div class="modal-content">
																<div class="modal-header">
																	<h5 class="modal-title" id="exampleModalLabel">Modal Title</h5>
																	<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																		<i aria-hidden="true" class="ki ki-close"></i>
																	</button>
																</div>
																<div class="modal-body" style="height: 800px;">
																	<!--begin::Entry-->
																	<div class="d-flex flex-column-fluid">
																		<!--begin::Container-->
																		<div class="container">
																			<!--begin::Card-->
																			<div class="card card-custom card-sticky" id="kt_page_sticky_card">
																				<div class="card-body">
																					<!--begin::Form-->
																					<form action="{% url 'update_house_url' i.pk %}" method="post" enctype="multipart/form-data">
																						{% csrf_token %}

																						<!-- Add input fields with initial values for each attribute of the Home model -->
																						<label>Name:</label>
																						<input type="text" name="name" value="{{ i.name }}" required><br><br>

																						<label>Home Image:</label>
																						<input type="file" name="home_img" accept="image/*"><br><br>

																						<!-- ... (previous form fields) ... -->

																						<label>Price:</label>
																						<input type="number" name="price" value="{{ i.price }}" required><br><br>

																						<label>User Image:</label>
																						<input type="file" name="user_img" accept="image/*"><br><br>

																						<label>User Name:</label>
																						<input type="text" name="user_name" value="{{ i.user_name }}" required><br><br>

																						<label>User Location:</label>
																						<input type="text" name="user_location" value="{{ i.user_location }}" required><br><br>

																						<label>Status:</label>
																						<select name="status" required>
																							<option value="popular" {% if i.status == "popular" %}selected{% endif %}>Popular</option>
																							<option value="new house" {% if i.status == "new house" %}selected{% endif %}>New House</option>
																							<option value="best deals" {% if i.status == "best deals" %}selected{% endif %}>Best Deals</option>
																						</select><br><br>

																						<label>Category:</label>
																						<select name="category" required>
																							<option value="House" {% if i.category == "House" %}selected{% endif %}>House</option>
																							<option value="Villa" {% if i.category == "Villa" %}selected{% endif %}>Villa</option>
																							<option value="Apartment" {% if i.category == "Apartment" %}selected{% endif %}>Apartment</option>
																						</select><br><br>

																						<label>Bathrooms:</label>
																						<input type="number" name="bathrooms" value="{{ i.bathrooms }}" required><br><br>

																						<label>Bedrooms:</label>
																						<input type="number" name="bedrooms" value="{{ i.bedrooms }}" required><br><br>

																						<label>Carports:</label>
																						<input type="number" name="carports" value="{{ i.carports }}" required><br><br>

																						<label>Floors:</label>
																						<input type="number" name="floors" value="{{ i.floors }}" required><br><br>

																						<label>Descriptions:</label>
																						<textarea name="descriptions" rows="4" cols="50" required>{{ i.descriptions }}</textarea><br><br>

																						<label>Created At:</label>
																						<input type="date" name="created_at" value="{{ i.created_at }}" required><br><br>

																						<!-- ... (remaining form fields) ... -->

																						<button type="submit">Update Home</button>
																					</form>
																				</div>
																</div>
														</td>
													<td>
														<!-- Button trigger modal-->
														<button type="button" class="btn btn-outline-danger" data-toggle="modal" data-target="#delete{{ i.id }}">
															Delete
														</button>

														<!-- Modal-->
														<div class="modal fade" id="delete{{ i.id }}" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog" role="document">
																<div class="modal-content">
																	<div class="modal-header">
																		<h5 class="modal-title" id="exampleModalLabel">O'chirish</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" class="ki ki-close"></i>
																		</button>
																	</div>
																	<div class="modal-body">
																		O'chirib yuborishga aminmisiz
																	</div>
																	<div class="modal-footer">
																		<button type="button" class="btn btn-light-primary font-weight-bold" data-dismiss="modal">Close</button>
																		<button type="button" class="btn btn-light"><a href="{% url 'delete_house_url' i.id %}" class="btn btn-light-danger font-weight-bold mr-2">Delete</a></button>
																	</div>
																</div>
															</div>
														</div>
													</td>
												</tr>
											{% endfor %}
											</tbody>
										</table>
										<!--end: Datatable-->
										{% if a.paginator.num_pages > 1 %}
											<div class="card-footer d-flex justify-content-end">
															<nav aria-label="Page navigation">
															  <ul class="pagination">
																{% if a.has_previous %}
																  <li class="page-item">
																	<a class="page-link" href="?page={{ a.previous_page_number }}">
																	  Previous
																	</a>
																  </li>
																{% endif %}
																{% for num in a.paginator.page_range %}
																{% if num == a.number %}
																<li class="page-item active">
																  <a class="page-link" href="#" tabindex="-1">{{ num }}</a>
																</li>
																{% elif num > a.number|add:'-2' and num < a.number|add:'2' %}
																<li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
																{% endif %}
																{% endfor %}
																{% if a.has_next %}
																<li class="page-item">
																  <a class="page-link" href="?page={{ a.next_page_number }}">
																	Next
																  </a>
																</li>
																{% endif %}
															  </ul>
															</nav>
														  </div>
										{% endif %}
									</div>
								</div>
								<!--end::Card-->
							</div>
							<!--end::Container-->
						</div>
						<!--end::Entry-->
					</div>
					<!--end::Content-->
{% endblock %}